[%# 1.0@bugzilla.org %]
[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Bug Tracking System.
  #
  # The Initial Developer of the Original Code is Netscape Communications
  # Corporation. Portions created by Netscape are
  # Copyright (C) 1998 Netscape Communications Corporation. All
  # Rights Reserved.
  #
  # Contributor(s): Myk Melez <myk@mozilla.org>
  #                 Frédéric Buclin <LpSolit@gmail.com>  
  #%]

[%# INTERFACE:
  # verify_fields: boolean; whether or not to verify
  #   the version, component, and target milestone fields
  # versions: array; versions for the new product.
  # components: array; components for the new product.
  # milestones: array; milestones for the new product.
  # defaults: hash; keys are names of fields, values are defaults for
  #   those fields
  # verify_bug_group: boolean; whether or not to ask the user
  #   if they want to add the bug to its new product's group
  # use_target_milestone: boolean; whether or not to use
  #   the target milestone field
  # old_groups: a list of group objects which are not available
  #   for the new product.

  #%]

[%# The global Bugzilla->cgi object is used to obtain form variable values. %]
[% USE Bugzilla %]
[% cgi = Bugzilla.cgi %]

[% PROCESS global/variables.none.tmpl %]

[% PROCESS global/header.html.tmpl
  title = 'Weryfikacja danych o nowym produkcie...' %]

<form action="process_bug.cgi" method="post">

[% PROCESS "global/hidden-fields.html.tmpl"
     exclude=(verify_fields ? "^version|component|target_milestone$" : "") %]

<input type="hidden" name="confirm_product_change" value="1">
[%# Verify the version, component, and target milestone fields. %]
[% IF verify_fields %]
  <h3>Weryfikacja wersji, komponentu[% ", wersji  docelowej" IF use_target_milestone %]</h3>

  <p>
  [% IF use_target_milestone %]
    Przenoszenie [% terms.bledu %] ([% terms.bledow %]) do produktu 
    <b>[% cgi.param("product") FILTER html %]</b>.
    Tym samym wersja, komponent i wersja docelowa [% terms.bledu %]              
    przestają być prawidłowe. Proszę uaktualnić te pola: 
  [% ELSE %]
    Przenoszenie [% terms.bledu %] ([% terms.bledow %]) do produktu 
    <b>[% cgi.param("product") FILTER html %]</b>,
    Tym samym wersja i komponent [% terms.bledu %]              
    przestają być prawidłowe. Proszę uaktualnić te pola: 
  [% END %]
  </p>

  <table>
    <tr>
      <td>
        <b>Wersja:</b><br>
        [% PROCESS "global/select-menu.html.tmpl" 
                   name="version"
                   options=versions
                   default=defaults.version
                   size=10 %]
      </td>
      <td>
        <b>Komponent:</b><br>
        [% PROCESS "global/select-menu.html.tmpl"
                   name="component"
                   options=components
                   default=defaults.component
                   size=10 %]
      </td>
      [% IF use_target_milestone %]
        <td>
          <b>Wersja docelowa:</b><br>
        [% PROCESS "global/select-menu.html.tmpl"
                   name="target_milestone"
                   options=milestones
                   default=defaults.target_milestone
                   size=10 %]
        </td>
      [% END %]
    </tr>
  </table>

[% END %]

[% IF verify_bug_group || old_groups.size %]
  <h3>Weryfikacja grupy [% terms.bledu %]</h3>

  [% IF old_groups.size %]
    <p>Następujące grupy nie są prawidłowe dla produktu <b>[% cgi.param("product") FILTER html %]</b>
     lub brak uprawnień do ograniczenia dostępu do [% terms.bledow %] do tych grup:</p>
    <ul>
      [% FOREACH group = old_groups %]
        <li>[% group.name FILTER html %]: [% group.description FILTER html %]</li>
      [% END %]
    </ul>
    <p><b>Dostęp do tych [%+ terms.bledow %] te nie będzie już ograniczony do tych grup i [% terms.bledy %] te
	mogą stać się publiczne jeśli nie są przypisane do innych grup.</b></p>
  [% END %]

  [% IF verify_bug_group %]
    <p>
      Ten nowy produkt posiada domyślne powiązane z nim grupy. Czy dodać ten 
      [%+ terms.blad %] do nich?<br>
      <input type="radio" id="add_no" name="addtonewgroup" value="no"><label for="add_no">nie</label><br>
      <input type="radio" id="add_yes" name="addtonewgroup" value="yes"><label for="add_yes">tak</label><br>
      <input type="radio" id="add_yesifinold" name="addtonewgroup" value="yesifinold" checked="checked">
        <label for="add_yesifinold">tak, ale tylko gdy [% terms.blad %] był w którejś z grup domyślnych poprzedniego 
        produktu</label>
    </p>
  [% END %]
[% END %]

<p>
  <input type="submit" id="change_product" value="Commit">
</p>

</form>
<hr>

[%# If 'id' is defined, then we are editing a single bug.
  # Else we are editing several bugs at once. %]

[% IF cgi.param('id') AND cgi.param('id').match('^\d+$') %]
  [% id = cgi.param('id') %]
  [% "Przerwanie i powrót do $terms.bledu $id" FILTER bug_link(id) FILTER none %]
[% ELSE %]
  <a href="buglist.cgi?regetlastlist=1">Przerwanie i powrót do wyników ostatniego wyszukiwania</a>
[% END %]

[% PROCESS global/footer.html.tmpl %]
